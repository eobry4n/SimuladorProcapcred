<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>💰 Simulador Procapcred Inteligente</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
  <div class="container">
    <header class="header">
      <div class="logo">
        <img src="https://iili.io/FG82yRs.png" alt="Logo Sicoob" onerror="this.onerror=null;this.src='https://iili.io/FG82yRs.png';"/>
      </div>
      <h1 class="title">💰 Simulador Procapcred</h1>
      <p class="subtitle">Descubra se vale a pena investir no capital social enquanto paga seu empréstimo</p>
    </header>

    <section class="form-section">
      <div class="form-group">
        <label for="valor" class="form-label">💵 Valor que você quer financiar</label>
        <input 
          type="text" 
          id="valor" 
          class="form-input" 
          placeholder="Ex: 50.000"
          oninput="formatInputAsNumber(this)" 
          onblur="formatInputAsCurrency(this)"
          title="Insira o valor desejado para financiamento. Será formatado como moeda ao sair do campo."
        />
      </div>

      <div class="form-group">
        <label for="meses" class="form-label">📅 Em quantos meses quer pagar?</label>
        <input 
          type="number" 
          id="meses" 
          class="form-input" 
          placeholder="Ex: 24"
          min="3"
          max="120"
          title="Defina o número de meses para pagar o financiamento (mínimo 3, máximo 120)."
        />
      </div>

      <div class="form-group">
        <button type="button" class="simulate-btn" style="background: linear-gradient(45deg, #007bff, #0056b3); margin-top: 15px;" onclick="toggleAdvancedSettings()" title="Clique para mostrar/ocultar configurações avançadas de taxa.">
          ⚙️ Configurações Avançadas
        </button>
      </div>

      <div id="advancedSettings" style="display: none; border-top: 1px solid #e0e6ed; padding-top: 20px; margin-top: 20px;">
        <div class="form-group">
          <label class="form-label">Tipo de Operação</label>
          <div class="radio-group">
            <label>
              <input type="radio" name="tipoOperacao" value="indireta" checked onchange="toggleAgentRate()"> Operações Indiretas
            </label>
            <label>
              <input type="radio" name="tipoOperacao" value="direta" onchange="toggleAgentRate()"> Operações Diretas
            </label>
          </div>
        </div>

        <div class="form-group">
          <label for="custoFinanceiro" class="form-label">Custo Financeiro (Ex: 7 para 7%)</label>
          <input 
            type="number" 
            id="custoFinanceiro" 
            class="form-input" 
            placeholder="Ex: 7"
            min="0"
            step="0.01"
            value="7"
            title="Insira o Custo Financeiro anual em porcentagem (ex: 7 para 7%)."
          />
        </div>

        <div class="form-group">
          <label for="taxaBndes" class="form-label">Taxa do BNDES (Ex: 1.5 para 1.5%)</label>
          <input 
            type="number" 
            id="taxaBndes" 
            class="form-input" 
            placeholder="Ex: 1.5 ou 5"
            min="0"
            step="0.01"
            value="1.5"
            title="Insira a Taxa do BNDES anual em porcentagem (ex: 1.5 para 1.5% ou 5 para 5%)."
          />
        </div>

        <div class="form-group" id="agentRateGroup">
          <label for="taxaAgente" class="form-label">Taxa do Agente Financeiro (Ex: 3 para 3%)</label>
          <input 
            type="number" 
            id="taxaAgente" 
            class="form-input" 
            placeholder="Ex: 3"
            min="0"
            step="0.01"
            value="3"
            title="Insira a Taxa do Agente Financeiro anual em porcentagem (ex: 3 para 3%)."
          />
        </div>
      </div>
      <button class="simulate-btn" onclick="calcularSimulacao()" title="Clique para calcular a sua simulação financeira.">
        🚀 Calcular Simulação
      </button>
    </section>

    <section class="results-section" id="resultados">
      <div class="result-card" id="resultado-principal">
        <div class="result-title">
          <span id="resultado-icon">🎯</span>
          <span id="resultado-titulo">Resultado da Análise</span>
        </div>
        <div class="result-value" id="resultado-valor">R$ 0,00</div>
        <div class="result-description" id="resultado-descricao">
          Calculando...
        </div>
      </div>

      <div class="comparison-grid" id="comparativo">
        </div>

      <div class="summary-section" id="summary-comparison">
        </div>

      <div class="chart-container" id="grafico-container" style="display: none;">
        <h3 class="chart-title">📊 Comparativo Visual</h3>
        <canvas id="grafico" width="400" height="200"></canvas>
      </div>

      <div class="chart-container" id="amortizacao-chart-container" style="display: none;">
        <h3 class="chart-title">📈 Plano de Amortização (Juros vs. Amortização)</h3>
        <canvas id="grafico-amortizacao" width="400" height="200"></canvas>
      </div>

      <div class="installments-section" id="parcelamento">
        <h3 class="installments-title">
          💳 Detalhes do Financiamento
        </h3>
        <div class="installments-table-container">
          <table class="installments-table">
            <thead>
              <tr>
                <th>Parcela</th>
                <th>Valor da Parcela</th>
                <th>Juros</th>
                <th>Amortização</th>
                <th>Saldo Devedor</th>
              </tr>
            </thead>
            <tbody id="parcelas-grid">
              </tbody>
          </table>
        </div>
      </div>
    </section>

    <section class="actions-section">
      <a href="https://wa.me/5562999999999" class="whatsapp-btn" target="_blank" title="Fale com um gerente via WhatsApp para mais informações.">
        📱 Falar com Gerente no WhatsApp
      </a>
      <div class="share-buttons">
        <a href="#" id="share-whatsapp" class="share-btn whatsapp" title="Partilhar os resultados no WhatsApp.">
          <i class="fab fa-whatsapp"></i> Partilhar no WhatsApp
        </a>
        <a href="#" id="share-email" class="share-btn email" title="Partilhar os resultados por e-mail.">
          <i class="fas fa-envelope"></i> Partilhar por E-mail
        </a>
      </div>
    </section>

    <footer class="footer">
      <p>🏦 Desenvolvido por <strong>Inteligência Competitiva - Sicoob Unicidades</strong></p>
      <p>💡 Simulação baseada em dados reais da taxa SELIC</p>
    </footer>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="script.js"></script>
</body>
</html>